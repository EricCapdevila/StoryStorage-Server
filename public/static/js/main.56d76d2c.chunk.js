(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(54)},31:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),c=a.n(o),l=a(56),i=a(2),s=a(3),u=a(5),m=a(4),h=a(6),p=a(58),d=a(59),g=(a(31),a(55)),v=a(14),f=a.n(v),E=new(function(){function e(){Object(i.a)(this,e),this.auth=f.a.create({baseURL:"https://story-storage.herokuapp.com/",withCredentials:!0})}return Object(s.a)(e,[{key:"signup",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/signup",{username:t,password:a}).then(function(e){return e.data})}},{key:"login",value:function(e){var t=e.username,a=e.password;return this.auth.post("/auth/login",{username:t,password:a}).then(function(e){return e.data})}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then(function(e){return e.data})}},{key:"me",value:function(){return this.auth.get("/auth/me").then(function(e){return e.data})}}]),e}()),b=r.a.createContext(),j=b.Consumer,O=b.Provider,y=function(e){return function(t){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(m.a)(a).apply(this,arguments))}return Object(h.a)(a,t),Object(s.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(j,null,function(a){return r.a.createElement(e,Object.assign({login:a.login,signup:a.signup,user:a.user,logout:a.logout,isLoggedin:a.isLoggedin},t.props))})}}]),a}(n.Component)},C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedin:!1,user:null,isLoading:!0},a.signup=function(e){var t=e.username,n=e.password;E.signup({username:t,password:n}).then(function(e){a.setState({isLoggedin:!0,user:e})}).catch(function(e){var t=e.response.data;a.setState({message:t.statusMessage})})},a.login=function(e){var t=e.username,n=e.password;E.login({username:t,password:n}).then(function(e){a.setState({isLoggedin:!0,user:e})}).catch(function(){})},a.logout=function(){E.logout().then(function(){a.setState({isLoggedin:!1,user:null})}).catch(function(){})},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.me().then(function(t){e.setState({isLoggedin:!0,user:t,isLoading:!1})}).catch(function(){e.setState({isLoggedin:!1,user:null,isLoading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.isLoggedin,n=e.user;return t?r.a.createElement("div",null,"Loading"):r.a.createElement(O,{value:{isLoggedin:a,user:n,login:this.login,logout:this.logout,signup:this.signup}},this.props.children)}}]),t}(n.Component),k=y(function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,a=e.logout,n=e.isLoggedin;return r.a.createElement("div",null,n?r.a.createElement("div",{className:"drop-down-styles"},r.a.createElement("p",{className:"drop-items"},"Loged in as: ",t.username),r.a.createElement("button",{className:"button-drop drop-items",onClick:a},"Logout")):r.a.createElement("div",{className:"drop-down-styles"},r.a.createElement(g.a,{to:"/login",className:"drop-items"},"Login"),r.a.createElement(g.a,{to:"/signup",className:"drop-items"},"Signup")))}}]),t}(n.Component)),P=function(){return r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(k,null))},N=y(function(){return r.a.createElement("nav",{className:"nav-style"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"logo.png",alt:"StoryStorage Logo"})),r.a.createElement("div",{className:"nav-top-left"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(g.a,{to:"/projects",className:"link"},"Projects")),r.a.createElement("li",{className:"dropdown"},r.a.createElement(P,null),r.a.createElement("img",{src:"user.png",alt:"user"})))))}),w=a(11),S=y(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.signup({username:n,password:r})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",{className:"authBox"},r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"auth-form"},r.a.createElement("h2",null,"Signup"),r.a.createElement("hr",null),r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup",className:"button"}),r.a.createElement("p",{className:"underButton"},"Already have account?",r.a.createElement(g.a,{to:"/login"}," Login"))))}}]),t}(n.Component)),L=y(function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.props.login({username:n,password:r})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",{className:"authBox"},r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"auth-form"},r.a.createElement("h2",null,"Login"),r.a.createElement("hr",null),r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login",className:"button"})))}}]),t}(n.Component)),F=a(17),x=a(57);var R=y(function(e){var t=e.component,a=e.isLoggedin,n=Object(F.a)(e,["component","isLoggedin"]);return r.a.createElement(d.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(x.a,{to:"/login"})}}))});var A=y(function(e){var t=e.component,a=e.isLoggedin,n=Object(F.a)(e,["component","isLoggedin"]);return r.a.createElement(d.a,Object.assign({},n,{render:function(e){return a?null:r.a.createElement(t,e)}}))}),D=new(function(){function e(){Object(i.a)(this,e),this.projects=f.a.create({baseURL:"https://story-storage.herokuapp.com/",withCredentials:!0})}return Object(s.a)(e,[{key:"getAll",value:function(){return this.projects.get("/projects/").then(function(e){return e.data})}},{key:"getOne",value:function(e){return this.projects.get("/projects/".concat(e)).then(function(e){return e.data})}},{key:"deleteOne",value:function(e){return this.projects.delete("/projects/".concat(e)).then(function(e){return console.log("delete response",e),e}).catch(function(e){return console.log(e)})}},{key:"updateOne",value:function(e,t){var a=t.title,n=t.genre,r=t.summary,o=t.chapters,c=t.characters,l=t.locations,i=t.timeline,s=t.misc,u=t.author,m=t.opinions,h=t.isPrivate;return this.projects.put("/projects/".concat(e),{title:a,genre:n,summary:r,chapters:o,characters:c,locations:l,timeline:i,misc:s,author:u,opinions:m,isPrivate:h}).then(function(e){return e.data}).catch(function(e){return console.log(e)})}},{key:"addOne",value:function(e){var t=e.title,a=e.genre,n=e.summary,r=e.isPrivate;return this.projects.post("/projects/",{title:t,genre:a,summary:n,isPrivate:r})}}]),e}()),H=y(function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault(),D.addOne(a.state),a.setState({title:"",genre:"Other",summary:"",isPrivate:!1}),a.props.toggleForm()},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.handleRadioChange=function(e){a.setState({isPrivate:!a.state.isPrivate})},a.state={title:"",genre:"Other",summary:"",isPrivate:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"auth-form absolute"},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Summary:"),r.a.createElement("div",null,r.a.createElement("textarea",{maxlength:"300",name:"summary",value:this.state.summary,onChange:function(t){return e.handleChange(t)},cols:40,rows:10})),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Genre:"),r.a.createElement("select",{name:"genre",value:this.state.genre,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",null,"--Choose One--"),r.a.createElement("option",{value:"Science Fiction"},"Science Fiction"),r.a.createElement("option",{value:"Fantasy"},"Fantasy"),r.a.createElement("option",{value:"Romance"},"Romance"),r.a.createElement("option",{value:"Historical"},"Historical"),r.a.createElement("option",{value:"Horror"},"Horror"),r.a.createElement("option",{value:"Crime"},"Crime"),r.a.createElement("option",{value:"Other"},"Other"))),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Private:"),r.a.createElement("input",{type:"checkbox",className:"checkbox",onChange:function(t){return e.handleRadioChange(t)}})),r.a.createElement("input",{type:"submit",value:"submit"}))}}]),t}(n.Component)),T=y(function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getMyProjects=function(){D.getAll().then(function(e){var t=e.filter(function(e){return e.author===a.props.user._id});a.setState({myProjects:t,originalProjects:t})})},a.toggleForm=function(){a.setState({showingForm:!a.state.showingForm})},a.state={myProjects:[],clickedObject:[],showingForm:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getMyProjects()}},{key:"render",value:function(){return r.a.createElement("div",{className:"bookpage-background"},0===!this.state.myProjects.length?r.a.createElement("div",null,"There are no objects to display"):r.a.createElement("div",{className:"myProjects"},this.state.myProjects.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(g.a,{to:"/projects/".concat(e._id)},r.a.createElement("span",{className:"projectCards"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.summary," "))))})),this.state.showingForm?r.a.createElement("div",{className:"popup-back"},r.a.createElement("button",{onClick:this.toggleForm,className:"ex-button"},"x"),r.a.createElement(H,{toggleForm:this.toggleForm})):r.a.createElement("button",{onClick:this.toggleForm,className:"plus-button"},"+"))}}]),t}(n.Component)),U=function(e){return r.a.createElement("aside",{className:"side-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("general")}},"General")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("chapters")}},"Chapters")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("characters")}},"Characters")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("locations")}},"Locations")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("timeline")}},"Timeline"))))},M=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={opinions:[]},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.getOne(this.props.id).then(function(t){e.setState({opinions:t.opinions})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"general-opinions"},0===this.state.opinions.length?r.a.createElement("div",{className:"no-opinions"},r.a.createElement("p",null,"No one rated your project :( ")):r.a.createElement("div",{className:"opinions"},this.state.opinions.map(function(e){return r.a.createElement("div",{className:"oneOpinion"},r.a.createElement("p",{className:"user"},e.user.username),r.a.createElement("p",{className:"comment"},e.comment),r.a.createElement("p",{className:"rating"},e.rating))})))}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={titlePlaceholder:"",title:"",summaryPlaceholder:"",summary:"",genre:"",isPrivate:""},a.sendUpdates=function(e){e.preventDefault();var t=a.state,n={title:t.title,summary:t.summary,genre:t.genre,isPrivate:t.isPrivate};a.props.updateGeneral(n),a.props.sent()},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.handleRadioChange=function(e){a.setState({isPrivate:!a.state.isPrivate})},a.privateValue=function(){return a.state.isPrivate},a.deleteProject=function(){window.location.reload(),a.props.deleteProject(a.props.id)},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelector("#title");t.addEventListener("input",function(a){e.setState({title:t.innerText})});var a=document.querySelector("#summary");a.addEventListener("input",function(t){e.setState({summary:a.innerText})});var n=this.props.project;this.setState({titlePlaceholder:n.title,summaryPlaceholder:n.summary,title:n.title,summary:n.summary,genre:n.genre,isPrivate:n.isPrivate}),console.log("general props",this.props)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"project-component"},r.a.createElement("form",{onSubmit:function(t){return e.sendUpdates(t)}},r.a.createElement("div",{className:"save-delete"},r.a.createElement("button",{type:"submit",value:"Save Changes",className:"editor-button"},"Save"),r.a.createElement("button",{href:"/projects",onClick:this.deleteProject,className:"editor-button"},"Delete")),r.a.createElement("div",{className:"form-under-buttons"},r.a.createElement("h1",{id:"title",contentEditable:!0},this.state.titlePlaceholder),r.a.createElement("p",{id:"summary",contentEditable:!0,className:"editable-long-text"},this.state.summaryPlaceholder),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Private:"),r.a.createElement("input",{type:"checkbox",className:"checkbox",checked:this.privateValue(),onChange:function(t){return e.handleRadioChange(t)}})),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Genre:"),r.a.createElement("select",{name:"genre",value:this.state.genre,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",null,"--Choose One--"),r.a.createElement("option",{value:"Science Fiction"},"Science Fiction"),r.a.createElement("option",{value:"Fantasy"},"Fantasy"),r.a.createElement("option",{value:"Romance"},"Romance"),r.a.createElement("option",{value:"Historical"},"Historical"),r.a.createElement("option",{value:"Horror"},"Horror"),r.a.createElement("option",{value:"Crime"},"Crime"),r.a.createElement("option",{value:"Other"},"Other"))))),r.a.createElement(M,{id:this.props.id}))}}]),t}(n.Component),B=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"YOU ARE IN THE Characters page"))}}]),t}(n.Component),_=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"CHAPTERS"))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"LOCATIONS"))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Timeline"))}}]),t}(n.Component),J=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).updateDB=function(){a.state.updatesReceived&&(console.log("provider updated",a.state),D.updateOne(a.state.id,a.state.project).then(function(e){a.setState({project:e})}),a.setState({updatesReceived:!1}))},a.updateGeneral=function(e){console.log("content",e),a.setState({project:e})},a.delete=function(e){D.deleteOne(e)},a.handleEditor=function(e){a.setState({render:e})},a.toggleUpdatesReceived=function(){a.setState({updatesReceived:!0})};var n=a.props.match.params.id;return a.state={project:null,id:n,render:"",updatesReceived:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.getOne(this.state.id).then(function(t){e.setState({project:t})})}},{key:"componentDidUpdate",value:function(){this.updateDB()}},{key:"render",value:function(){var e={project:this.state.project,updateGeneral:this.updateGeneral,deleteProject:this.delete,sent:this.toggleUpdatesReceived,id:this.props.match.params.id},t=this.state.render;switch(t){case"general":t=r.a.createElement(G,e);break;case"chapters":t=r.a.createElement(_,e);break;case"characters":t=r.a.createElement(B,e);break;case"locations":t=r.a.createElement(I,e);break;case"timeline":t=r.a.createElement(q,e)}return r.a.createElement("div",{className:"project-editor"},r.a.createElement(U,{handleEditor:this.handleEditor}),this.state.project?t:r.a.createElement("h2",null,"No Project to display"))}}]),t}(r.a.Component),V=y(function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getProjects=function(){D.getAll().then(function(e){var t=e.filter(function(e){return!e.isPrivate});a.setState({PublicProjects:t})})},a.state={PublicProjects:[]},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getProjects()}},{key:"render",value:function(){return r.a.createElement("div",{className:"bookshelf-background"},0===!this.state.PublicProjects.length?r.a.createElement("div",null,"There are no objects to display"):r.a.createElement("div",{className:"myProjects"},this.state.PublicProjects.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("div",{className:"projectCards"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.summary," ")))})))}}]),t}(n.Component)),Y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement(N,null),r.a.createElement(p.a,null,r.a.createElement(A,{path:"/signup",component:S}),r.a.createElement(A,{path:"/login",component:L}),r.a.createElement(d.a,{exact:!0,path:"/",component:V}),r.a.createElement(R,{exact:!0,path:"/projects",component:T}),r.a.createElement(R,{path:"/projects/:id",component:J})))}}]),t}(n.Component);c.a.render(r.a.createElement(l.a,null,r.a.createElement(Y,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.56d76d2c.chunk.js.map