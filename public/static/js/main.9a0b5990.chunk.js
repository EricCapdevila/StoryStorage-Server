(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){e.exports=n(54)},31:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),c=n.n(o),l=n(56),i=n(2),s=n(3),u=n(5),m=n(4),h=n(6),p=n(58),d=n(59),g=(n(31),n(55)),v=n(14),E=n.n(v),f=new(function(){function e(){Object(i.a)(this,e),this.auth=E.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://story-storage.herokuapp.com/"}).EACT_APP_API_URL,withCredentials:!0})}return Object(s.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/signup",{username:t,password:n}).then(function(e){return e.data})}},{key:"login",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/login",{username:t,password:n}).then(function(e){return e.data})}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then(function(e){return e.data})}},{key:"me",value:function(){return this.auth.get("/auth/me").then(function(e){return e.data})}}]),e}()),b=r.a.createContext(),j=b.Consumer,O=b.Provider,y=function(e){return function(t){function n(){return Object(i.a)(this,n),Object(u.a)(this,Object(m.a)(n).apply(this,arguments))}return Object(h.a)(n,t),Object(s.a)(n,[{key:"render",value:function(){var t=this;return r.a.createElement(j,null,function(n){return r.a.createElement(e,Object.assign({login:n.login,signup:n.signup,user:n.user,logout:n.logout,isLoggedin:n.isLoggedin},t.props))})}}]),n}(a.Component)},C=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedin:!1,user:null,isLoading:!0},n.signup=function(e){var t=e.username,a=e.password;f.signup({username:t,password:a}).then(function(e){n.setState({isLoggedin:!0,user:e})}).catch(function(e){var t=e.response.data;n.setState({message:t.statusMessage})})},n.login=function(e){var t=e.username,a=e.password;f.login({username:t,password:a}).then(function(e){n.setState({isLoggedin:!0,user:e})}).catch(function(){})},n.logout=function(){f.logout().then(function(){n.setState({isLoggedin:!1,user:null})}).catch(function(){})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.me().then(function(t){e.setState({isLoggedin:!0,user:t,isLoading:!1})}).catch(function(){e.setState({isLoggedin:!1,user:null,isLoading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedin,a=e.user;return t?r.a.createElement("div",null,"Loading"):r.a.createElement(O,{value:{isLoggedin:n,user:a,login:this.login,logout:this.logout,signup:this.signup}},this.props.children)}}]),t}(a.Component),P=y(function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,a=e.isLoggedin;return r.a.createElement("div",null,a?r.a.createElement("div",{className:"drop-down-styles"},r.a.createElement("p",{className:"drop-items"},"Loged in as: ",t.username),r.a.createElement("button",{className:"button-drop drop-items",onClick:n},"Logout")):r.a.createElement("div",{className:"drop-down-styles"},r.a.createElement(g.a,{to:"/login",className:"drop-items"},"Login"),r.a.createElement(g.a,{to:"/signup",className:"drop-items"},"Signup")))}}]),t}(a.Component)),k=function(){return r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(P,null))},w=y(function(){return r.a.createElement("nav",{className:"nav-style"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"logo.png",alt:"StoryStorage Logo"})),r.a.createElement("div",{className:"nav-top-left"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(g.a,{to:"/projects",className:"link"},"Projects")),r.a.createElement("li",{className:"dropdown"},r.a.createElement(k,null),r.a.createElement("img",{src:"user.png",alt:"user"})))))}),S=n(11),N=y(function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.props.signup({username:a,password:r})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",{className:"authBox"},r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"auth-form"},r.a.createElement("h2",null,"Signup"),r.a.createElement("hr",null),r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup",className:"button"}),r.a.createElement("p",{className:"underButton"},"Already have account?",r.a.createElement(g.a,{to:"/login"}," Login"))))}}]),t}(a.Component)),L=y(function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.props.login({username:a,password:r})},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return r.a.createElement("div",{className:"authBox"},r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"auth-form"},r.a.createElement("h2",null,"Login"),r.a.createElement("hr",null),r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login",className:"button"})))}}]),t}(a.Component)),A=n(17),R=n(57);var F=y(function(e){var t=e.component,n=e.isLoggedin,a=Object(A.a)(e,["component","isLoggedin"]);return r.a.createElement(d.a,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(R.a,{to:"/login"})}}))});var _=y(function(e){var t=e.component,n=e.isLoggedin,a=Object(A.a)(e,["component","isLoggedin"]);return r.a.createElement(d.a,Object.assign({},a,{render:function(e){return n?null:r.a.createElement(t,e)}}))}),x=new(function(){function e(){Object(i.a)(this,e),this.projects=E.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://story-storage.herokuapp.com/"}).EACT_APP_API_URL,withCredentials:!0})}return Object(s.a)(e,[{key:"getAll",value:function(){return this.projects.get("/projects/").then(function(e){return e.data})}},{key:"getOne",value:function(e){return this.projects.get("/projects/".concat(e)).then(function(e){return e.data})}},{key:"deleteOne",value:function(e){return this.projects.delete("/projects/".concat(e)).then(function(e){return console.log("delete response",e),e}).catch(function(e){return console.log(e)})}},{key:"updateOne",value:function(e,t){var n=t.title,a=t.genre,r=t.summary,o=t.chapters,c=t.characters,l=t.locations,i=t.timeline,s=t.misc,u=t.author,m=t.opinions,h=t.isPrivate;return this.projects.put("/projects/".concat(e),{title:n,genre:a,summary:r,chapters:o,characters:c,locations:l,timeline:i,misc:s,author:u,opinions:m,isPrivate:h}).then(function(e){return e.data}).catch(function(e){return console.log(e)})}},{key:"addOne",value:function(e){var t=e.title,n=e.genre,a=e.summary,r=e.isPrivate;return this.projects.post("/projects/",{title:t,genre:n,summary:a,isPrivate:r})}}]),e}()),U=y(function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault(),x.addOne(n.state),n.setState({title:"",genre:"Other",summary:"",isPrivate:!1}),n.props.toggleForm()},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n.handleRadioChange=function(e){n.setState({isPrivate:!n.state.isPrivate})},n.state={title:"",genre:"Other",summary:"",isPrivate:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"auth-form absolute"},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Summary:"),r.a.createElement("div",null,r.a.createElement("textarea",{name:"summary",value:this.state.summary,onChange:function(t){return e.handleChange(t)},cols:40,rows:10})),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Genre:"),r.a.createElement("select",{name:"genre",value:this.state.genre,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",null,"--Choose One--"),r.a.createElement("option",{value:"Science Fiction"},"Science Fiction"),r.a.createElement("option",{value:"Fantasy"},"Fantasy"),r.a.createElement("option",{value:"Romance"},"Romance"),r.a.createElement("option",{value:"Historical"},"Historical"),r.a.createElement("option",{value:"Horror"},"Horror"),r.a.createElement("option",{value:"Crime"},"Crime"),r.a.createElement("option",{value:"Other"},"Other"))),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Private:"),r.a.createElement("input",{type:"checkbox",className:"checkbox",onChange:function(t){return e.handleRadioChange(t)}})),r.a.createElement("input",{type:"submit",value:"submit"}))}}]),t}(a.Component)),D=y(function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getMyProjects=function(){x.getAll().then(function(e){var t=e.filter(function(e){return e.author===n.props.user._id});n.setState({myProjects:t,originalProjects:t})})},n.toggleForm=function(){n.setState({showingForm:!n.state.showingForm})},n.state={myProjects:[],clickedObject:[],showingForm:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getMyProjects()}},{key:"render",value:function(){return r.a.createElement("div",{className:"bookpage-background"},0===!this.state.myProjects.length?r.a.createElement("div",null,"There are no objects to display"):r.a.createElement("div",{className:"myProjects"},this.state.myProjects.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement(g.a,{to:"/projects/".concat(e._id)},r.a.createElement("span",{className:"projectCards"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.summary," "))))})),this.state.showingForm?r.a.createElement("div",{className:"popup-back"},r.a.createElement("button",{onClick:this.toggleForm,className:"ex-button"},"x"),r.a.createElement(U,{toggleForm:this.toggleForm})):r.a.createElement("button",{onClick:this.toggleForm,className:"plus-button"},"+"))}}]),t}(a.Component)),T=function(e){return r.a.createElement("aside",{className:"side-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("general")}},"General")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("chapters")}},"Chapters")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("characters")}},"Characters")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("locations")}},"Locations")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("timeline")}},"Timeline")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return e.handleEditor("opinions")}},"Opinions"))))},H=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={titlePlaceholder:"",title:"",summaryPlaceholder:"",summary:"",genre:"",isPrivate:""},n.sendUpdates=function(e){e.preventDefault();var t=n.state,a={title:t.title,summary:t.summary,genre:t.genre,isPrivate:t.isPrivate};n.props.updateGeneral(a),n.props.sent()},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(S.a)({},a,r))},n.handleRadioChange=function(e){n.setState({isPrivate:!n.state.isPrivate})},n.privateValue=function(){return n.state.isPrivate},n.deleteProject=function(){window.location.reload(),n.props.deleteProject(n.props.id)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelector("#title");t.addEventListener("input",function(n){e.setState({title:t.innerText})});var n=document.querySelector("#summary");n.addEventListener("input",function(t){e.setState({summary:n.innerText})});var a=this.props.project;this.setState({titlePlaceholder:a.title,summaryPlaceholder:a.summary,title:a.title,summary:a.summary,genre:a.genre,isPrivate:a.isPrivate})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"project-component"},r.a.createElement("form",{onSubmit:function(t){return e.sendUpdates(t)}},r.a.createElement("div",{className:"save-delete"},r.a.createElement("button",{type:"submit",value:"Save Changes",className:"editor-button"},"Save"),r.a.createElement("button",{href:"/projects",onClick:this.deleteProject,className:"editor-button"},"Delete")),r.a.createElement("div",{className:"form-under-buttons"},r.a.createElement("h1",{id:"title",contentEditable:!0},this.state.titlePlaceholder),r.a.createElement("p",{id:"summary",contentEditable:!0,className:"editable-long-text"},this.state.summaryPlaceholder),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Private:"),r.a.createElement("input",{type:"checkbox",className:"checkbox",checked:this.privateValue(),onChange:function(t){return e.handleRadioChange(t)}})),r.a.createElement("div",{className:"form-section"},r.a.createElement("label",null,"Genre:"),r.a.createElement("select",{name:"genre",value:this.state.genre,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",null,"--Choose One--"),r.a.createElement("option",{value:"Science Fiction"},"Science Fiction"),r.a.createElement("option",{value:"Fantasy"},"Fantasy"),r.a.createElement("option",{value:"Romance"},"Romance"),r.a.createElement("option",{value:"Historical"},"Historical"),r.a.createElement("option",{value:"Horror"},"Horror"),r.a.createElement("option",{value:"Crime"},"Crime"),r.a.createElement("option",{value:"Other"},"Other"))))))}}]),t}(a.Component),I=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"YOU ARE IN THE Characters page"))}}]),t}(a.Component),M=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"CHAPTERS"))}}]),t}(a.Component),B=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"LOCATIONS"))}}]),t}(a.Component),G=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Timeline"))}}]),t}(a.Component),V=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={opinions:[]},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.getOne(this.match.params.id).then(function(t){e.setState({opinions:t})}),console.log("id from the opinions",this.match.params.id)}},{key:"render",value:function(){return r.a.createElement("div",{className:"general-opinions"},r.a.createElement("h1",null,"Opinions page"))}}]),t}(a.Component),q=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).updateDB=function(){n.state.updatesReceived&&(console.log("provider updated",n.state),x.updateOne(n.state.id,n.state.project).then(function(e){n.setState({project:e})}),n.setState({updatesReceived:!1}))},n.updateGeneral=function(e){console.log("content",e),n.setState({project:e})},n.delete=function(e){x.deleteOne(e)},n.handleEditor=function(e){n.setState({render:e})},n.toggleUpdatesReceived=function(){n.setState({updatesReceived:!0})};var a=n.props.match.params.id;return n.state={project:null,id:a,render:"",updatesReceived:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;x.getOne(this.state.id).then(function(t){e.setState({project:t})})}},{key:"componentDidUpdate",value:function(){this.updateDB()}},{key:"render",value:function(){var e={project:this.state.project,updateGeneral:this.updateGeneral,deleteProject:this.delete,sent:this.toggleUpdatesReceived,id:this.props.match.params.id},t=this.state.render;switch(t){case"general":t=r.a.createElement(H,e);break;case"chapters":t=r.a.createElement(M,e);break;case"characters":t=r.a.createElement(I,e);break;case"locations":t=r.a.createElement(B,e);break;case"timeline":t=r.a.createElement(G,e);break;default:t=r.a.createElement("div",null,r.a.createElement(H,e),r.a.createElement(V,null))}return r.a.createElement("div",null,r.a.createElement(T,{handleEditor:this.handleEditor}),t.props.project?t:r.a.createElement("h2",null,"No Project to display"))}}]),t}(r.a.Component),J=y(function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).getProjects=function(){x.getAll().then(function(e){var t=e.filter(function(e){return!e.isPrivate});n.setState({PublicProjects:t})})},n.state={PublicProjects:[]},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getProjects()}},{key:"render",value:function(){return r.a.createElement("div",{className:"bookshelf-background"},0===!this.state.PublicProjects.length?r.a.createElement("div",null,"There are no objects to display"):r.a.createElement("div",{className:"myProjects"},this.state.PublicProjects.map(function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("div",{className:"projectCards"},r.a.createElement("h3",null,e.title),r.a.createElement("p",null,e.summary," ")))})))}}]),t}(a.Component)),Y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement(w,null),r.a.createElement(p.a,null,r.a.createElement(_,{path:"/signup",component:N}),r.a.createElement(_,{path:"/login",component:L}),r.a.createElement(d.a,{exact:!0,path:"/",component:J}),r.a.createElement(F,{exact:!0,path:"/projects",component:D}),r.a.createElement(F,{path:"/projects/:id",component:q})))}}]),t}(a.Component);c.a.render(r.a.createElement(l.a,null,r.a.createElement(Y,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.9a0b5990.chunk.js.map